<!-- --- START OF FILE arc_database_v1.5.0.html --- -->
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARC RAIDERS // DATABASE v1.5.0</title>
    <style>
        /* FONTS */
        @import url('https://fonts.googleapis.com/css2?family=Barlow:wght@400;500;600;700&family=Rajdhani:wght@500;600;700&family=Teko:wght@300;400;500;600;700&display=swap');

        :root {
            /* GAME UI PALETTE */
            --bg-body: #050505;
            --bg-overlay: rgba(10, 10, 12, 0.85);
            --bg-panel: rgba(20, 22, 25, 0.7);
            --border-tech: rgba(255, 255, 255, 0.15);
            
            /* COLORS */
            --arc-yellow: #ffc400;
            --arc-white: #e6e6e6;
            --arc-teal: #00e5ff;   
            --arc-red: #ff2a2a;
            
            /* SIDEBAR COLORS */
            --sb-inactive-bg: #2b2f3b;
            --sb-inactive-icon: #7f838d;
            --sb-active-bg: #f2e8d5;
            --sb-active-icon: #141619;

            --sb-icon-size: 52px;
            --sb-gap: 8px;

            /* CARD COLORS */
            --card-bg: #f2e8d5;
            --card-footer: #dcd0b9;
            --card-text: #121418;
            
            /* RARITY COLORS */
            --col-common: #7a7a7a;
            --col-uncommon: #009e48;
            --col-rare: #0090d4;
            --col-epic: #a040b0;
            --col-legendary: #ff9600;

            --font-head: 'Teko', sans-serif;
            --font-ui: 'Rajdhani', sans-serif;
            --font-body: 'Barlow', sans-serif;

            --header-h: 80px;
            --logo-h: 30px;
            --nav-font: 1.5rem;
            --btn-sys-h: 34px;
            --sb-w: 70px;
            --content-pad-left: 130px;
        }

        /* GLOBAL RESET */
        * { box-sizing: border-box; margin: 0; padding: 0; user-select: none; }

        body {
            background-color: var(--bg-body);
            background: radial-gradient(circle at 50% 30%, #1a1f2e 0%, #050505 80%);
            background-attachment: fixed;
            color: var(--arc-white);
            font-family: var(--font-ui);
            height: 100vh;
            display: flex;
            overflow: hidden;
            letter-spacing: 0.5px;
        }

        /* UI LAYOUT */
        .layout-container { flex: 1; display: flex; flex-direction: column; padding-top: var(--header-h); }

        /* HEADER */
        header {
            position: fixed; top: 0; left: 0; right: 0;
            height: var(--header-h);
            background: linear-gradient(180deg, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.7) 100%);
            backdrop-filter: blur(5px);
            border-bottom: 1px solid rgba(255,255,255,0.05);
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 20px; z-index: 1000;
        }

        .header-left { display: flex; align-items: center; gap: 20px; height: 100%; }
        .logo-wrapper { display: flex; flex-direction: column; align-items: center; justify-content: center; margin-right: 5px; cursor: pointer;}
        .app-logo { height: var(--logo-h); }
        .app-logo img { height: 100%; filter: drop-shadow(0 0 5px rgba(255, 196, 0, 0.3)); }

        /* CONNECT BUTTON */
        .connect-wrapper { position: relative; height: 40px; display: flex; align-items: center; }
        .btn-play {
            background-color: var(--arc-yellow); color: #050505;
            height: 100%; padding: 0 15px; border-radius: 40px;
            font-family: var(--font-head); font-weight: 700; font-size: 1.4rem;
            border: none; cursor: pointer; display: flex; align-items: center; gap: 8px;
            z-index: 2;
        }
        .btn-play svg { width: 18px; height: 18px; fill: #000; }

        .connect-dropdown {
            position: absolute; top: 50%; left: 25px; height: 100%;
            background: #111; border: 1px solid var(--arc-yellow); border-radius: 0 40px 40px 0;
            padding-left: 140px; padding-right: 20px;
            display: flex; align-items: center; gap: 5px;
            opacity: 0; pointer-events: none; transform: translateY(-50%) translateX(-20px); transition: 0.3s ease;
        }
        .connect-wrapper:hover .connect-dropdown { opacity: 1; pointer-events: auto; transform: translateY(-50%) translateX(0); }

        .sub-btn {
            background: transparent; color: var(--arc-yellow); border: 1px solid rgba(255, 196, 0, 0.3);
            font-family: var(--font-ui); font-weight: 700; font-size: 0.8rem; padding: 0 8px; height: 70%;
            border-radius: 4px; cursor: pointer; text-transform: uppercase;
        }
        .sub-btn:hover { background: var(--arc-yellow); color: #000; }

        /* NAV LINKS */
        .nav-links { display: flex; gap: 5px; margin-left: 10px; opacity: 0.3; pointer-events: none; }
        body.db-loaded .nav-links { opacity: 1; pointer-events: auto; }
        .nav-item {
            font-family: var(--font-head); font-weight: 600; font-size: var(--nav-font); color: #999;
            text-transform: uppercase; cursor: pointer; padding: 2px 15px; border: 2px solid transparent; border-radius: 50px;
        }
        .nav-item.active { color: #fff; border-color: #f0ebd8; background: rgba(255,255,255,0.05); }

        /* HEADER RIGHT */
        .header-right { display: flex; align-items: center; gap: 10px; }
        .search-box {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            padding: 0 12px; color: #fff; width: 200px; height: var(--btn-sys-h); border-radius: 4px;
            font-family: var(--font-ui); text-transform: uppercase; outline: none;
        }
        .btn-system {
            height: var(--btn-sys-h); padding: 0 12px; background: transparent; border: 1px solid rgba(255,255,255,0.2);
            color: #ccc; font-family: var(--font-ui); font-weight: 600; text-transform: uppercase; border-radius: 20px;
            cursor: pointer; transition: 0.2s;
        }
        .btn-system.active { border-color: var(--arc-teal); color: var(--arc-teal); background: rgba(0, 229, 255, 0.05); }

        /* SIDEBAR */
        aside {
            position: absolute; top: calc(var(--header-h) + 20px); left: 30px; bottom: 20px; 
            width: var(--sb-w); display: none; flex-direction: column; align-items: center; 
            gap: var(--sb-gap); z-index: 90;
        }
        body.db-loaded aside { display: flex; }
        .filter-circle {
            width: var(--sb-icon-size); height: var(--sb-icon-size); border-radius: 50%;
            background-color: var(--sb-inactive-bg); display: flex; justify-content: center; align-items: center;
            cursor: pointer; transition: 0.2s; border: 2px solid transparent; position: relative; overflow: hidden;
        }
        .filter-circle:hover { transform: scale(1.05); }
        .filter-circle.active { background-color: var(--sb-active-bg); border-color: var(--sb-active-bg); box-shadow: 0 0 15px rgba(242, 232, 213, 0.2); }
        .filter-circle img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        .filter-circle .icon-active { display: none; }
        .filter-circle.active .icon-active { display: block; }
        .filter-circle.active .icon-inactive { display: none; }

        /* CONTENT AREA */
        .content-area { flex: 1; padding: 20px 40px 40px 40px; overflow-y: auto; transition: padding-left 0.3s; }
        body.db-loaded .content-area { padding-left: var(--content-pad-left); }
        .stash-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; }

        /* SLOTS */
        .slot {
            aspect-ratio: 1; background-color: rgba(15, 15, 15, 0.6);
            border: 1px solid var(--border-tech); border-radius: 2px;
            position: relative; display: flex; align-items: center; justify-content: center;
            transition: 0.2s; overflow: hidden; cursor: pointer;
        }
        .slot:hover { border-color: #fff; background-color: rgba(40, 40, 45, 0.8); transform: scale(1.05); z-index: 2; }
        .slot img { max-width: 80%; max-height: 80%; object-fit: contain; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.8)); }
        
        .slot::after { content:''; position:absolute; bottom:0; left:0; right:0; height:3px; opacity:0.8; }
        .slot.common::after { background: var(--col-common); }
        .slot.uncommon::after { background: var(--col-uncommon); }
        .slot.rare::after { background: var(--col-rare); }
        .slot.epic::after { background: var(--col-epic); }
        .slot.legendary::after { background: var(--col-legendary); }

        /* LOADER */
        #loader { position: fixed; inset: 0; background: #000; display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 10000; }
        .loader-custom { width: 100px; height: 100px; animation: spin 2s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* TOOLTIP (CARTE BEIGE) */
        #sidebar-tooltip {
            position: fixed; display: none; background: rgba(10, 10, 10, 0.95); color: var(--arc-yellow);
            border: 1px solid var(--arc-yellow); padding: 5px 12px; font-family: var(--font-ui); font-weight: 700;
            text-transform: uppercase; z-index: 12000; pointer-events: none; border-radius: 0 8px 8px 8px;
        }
    </style>
</head>
<body>

<div id="loader">
    <svg class="loader-custom" viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" fill="none" stroke="white" stroke-width="2" stroke-dasharray="200" />
        <circle cx="50" cy="50" r="10" fill="var(--arc-yellow)" />
    </svg>
    <h2 style="margin-top:20px; font-family:var(--font-head); letter-spacing:2px; color:white;">ACCESSING ARCHIVE...</h2>
    <div id="loader-text" style="color:var(--arc-yellow); font-family:var(--font-ui);">INITIALIZING CONNECTION</div>
</div>

<header>
    <div class="header-left">
        <div class="logo-wrapper" onclick="location.reload()">
            <div class="app-logo"><img src="images/menu/ARC Raiders.png"></div>
        </div>
        <div class="connect-wrapper">
            <button class="btn-play">DATABASE <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></button>
            <div class="connect-dropdown">
                <button class="sub-btn" onclick="pickRepo('Speranza')">Speranza-Archive</button>
                <button class="sub-btn" onclick="pickRepo('Local')">Locale</button>
            </div>
        </div>
        <div class="nav-links">
            <div class="nav-item active" onclick="setSection('INVENTARIO')" data-nav="INVENTARIO">INVENTARIO</div>
            <div class="nav-item" onclick="setSection('OFFICINA')" data-nav="OFFICINA">OFFICINA</div>
            <div class="nav-item" onclick="setSection('PROGETTI')" data-nav="PROGETTI">PROGETTI</div>
        </div>
    </div>
    <div class="header-right">
        <input type="text" class="search-box" id="searchInput" placeholder="SEARCH" disabled oninput="render()">
        <button id="imgModeBtn" class="btn-system active" onclick="toggleImageMode()">IMG: REMOTE</button>
    </div>
</header>

<aside id="sidebarPanel"></aside>

<div class="content-area">
    <div id="grid-container" class="stash-grid">
        <div style="grid-column: 1/-1; text-align: center; margin-top: 20vh; color: #333;">
            <h1 style="font-family: var(--font-head); font-size: 5rem; opacity: 0.5;">NO SIGNAL</h1>
            <p style="color: var(--arc-yellow); font-size: 1.2rem;">INITIALIZE DATABASE CONNECTION</p>
        </div>
    </div>
</div>

<div id="sidebar-tooltip"></div>
<input type="file" id="folderInput" webkitdirectory directory multiple style="display:none" onchange="loadDataLocal(event)">

<script>
    let itemsDB = [], hideoutDB = [], allImages = new Map();
    let currentSection = 'INVENTARIO', currentFilter = 'ALL', imageMode = 'REMOTE', currentLang = 'it';
    const GITHUB_RAW = 'https://raw.githubusercontent.com/atarufox/Speranza-Archive/main/';

    const SIDEBAR_CONFIG = {
        'INVENTARIO': [
            { id: 'ALL', img: 'tutto', label: 'TUTTO' },
            { id: 'POTENZIAMENTI', img: 'potenziamenti', label: 'AUGMENTS' },
            { id: 'SCUDI', img: 'scudi', label: 'SHIELDS' },
            { id: 'ARMI', img: 'armi', label: 'WEAPONS' },
            { id: 'MUNIZIONI', img: 'munizioni', label: 'AMMO' },
            { id: 'USO_RAPIDO', img: 'uso_rapido', label: 'QUICK USE' },
            { id: 'MATERIALI', img: 'crafting', label: 'MATERIALS' }
        ],
        'OFFICINA': [
            { id: 'ALL', img: 'tutto', label: 'ALL BENCHES' },
            { id: 'workbench', img: 'workbench', label: 'WORKBENCH' },
            { id: 'weapon_bench', img: 'weapon_bench', label: 'WEAPON BENCH' },
            { id: 'scrappy', img: 'scrappy', label: 'SCRAPPY' },
            { id: 'refiner', img: 'refiner', label: 'REFINER' }
        ],
        'PROGETTI': [
            { id: 'ALL', img: 'tutto', label: 'ALL BLUEPRINTS' },
            { id: 'ARMI', img: 'armi', label: 'WEAPONS' }
        ]
    };

    function setSection(section) {
        currentSection = section;
        currentFilter = 'ALL';
        document.querySelectorAll('.nav-item').forEach(n => n.classList.toggle('active', n.dataset.nav === section));
        renderSidebar();
        render();
    }

    function renderSidebar() {
        const sidebar = document.getElementById('sidebarPanel');
        sidebar.innerHTML = "";
        const config = SIDEBAR_CONFIG[currentSection] || [];
        const baseUrl = (imageMode === 'REMOTE') ? GITHUB_RAW : '';

        config.forEach(item => {
            const div = document.createElement('div');
            div.className = `filter-circle ${currentFilter === item.id ? 'active' : ''}`;
            div.onclick = () => { currentFilter = item.id; renderSidebar(); render(); };
            
            // Tooltip on hover
            div.onmouseenter = (e) => showSidebarTooltip(e, item.label);
            div.onmouseleave = hideSidebarTooltip;

            div.innerHTML = `
                <img class="icon-inactive" src="${baseUrl}images/menu/${item.img}_inactive.png" onerror="this.style.opacity='0.2'">
                <img class="icon-active" src="${baseUrl}images/menu/${item.img}_active.png" onerror="this.style.opacity='1'">
            `;
            sidebar.appendChild(div);
        });
    }

    async function loadDataRemote() {
        dom.loader.style.display = 'flex';
        try {
            const repo = 'atarufox/Speranza-Archive';
            const itemsRes = await fetch(`https://api.github.com/repos/${repo}/contents/items`);
            const itemsFiles = await itemsRes.json();
            const itemPromises = itemsFiles.filter(f => f.name.endsWith('.json')).map(f => fetch(f.download_url).then(r => r.json()));
            itemsDB = await Promise.all(itemPromises);

            const hideRes = await fetch(`https://api.github.com/repos/${repo}/contents/hideout`);
            if(hideRes.ok) {
                const hideFiles = await hideRes.json();
                const hidePromises = hideFiles.filter(f => f.name.endsWith('.json')).map(f => fetch(f.download_url).then(r => r.json()));
                hideoutDB = await Promise.all(hidePromises);
            }
            enableUI();
        } catch (e) { alert("GitHub Connection Error"); dom.loader.style.display = 'none'; }
    }

    function render() {
        const grid = document.getElementById('grid-container');
        grid.innerHTML = "";
        const search = document.getElementById('searchInput').value.toLowerCase();
        const baseUrl = (imageMode === 'REMOTE') ? GITHUB_RAW : '';

        let source = (currentSection === 'OFFICINA') ? hideoutDB : itemsDB;

        let filtered = source.filter(item => {
            const name = (item.name?.[currentLang] || item.name?.en || item.id || "").toLowerCase();
            if (search && !name.includes(search)) return false;

            const type = (item.type || "").toLowerCase();
            const isBP = type.includes('blueprint') || type.includes('schematic');

            if (currentSection === 'PROGETTI') { if (!isBP) return false; }
            else if (currentSection === 'OFFICINA') { /* logic */ }
            else { if (isBP) return false; }

            if (currentFilter === 'ALL') return true;
            
            // Logic Filtri
            if (currentFilter === 'ARMI') return type.includes('weapon') || type.includes('rifle') || type.includes('pistol') || type.includes('shotgun');
            if (currentFilter === 'MATERIALI') return type.includes('material') || type.includes('resource');
            if (currentFilter === 'POTENZIAMENTI') return type.includes('augment');
            if (currentFilter === 'SCUDI') return type.includes('shield');
            if (currentFilter === 'MUNIZIONI') return type.includes('ammunition') || type.includes('ammo');
            if (currentFilter === 'USO_RAPIDO') return type.includes('quick') || type.includes('consumable');
            if (currentSection === 'OFFICINA' && item.id !== currentFilter) return false;

            return currentFilter === 'ALL';
        });

        filtered.forEach(data => {
            const slot = document.createElement('div');
            slot.className = `slot ${(data.rarity || 'common').toLowerCase()}`;
            
            let imgUrl = "";
            if (currentSection === 'OFFICINA') {
                imgUrl = `${baseUrl}images/menu/${data.id.toLowerCase()}.png`;
            } else {
                if (imageMode === 'REMOTE') {
                    imgUrl = data.imageFilename ? (GITHUB_RAW + data.imageFilename.replace(/\\/g, '/')) : "";
                } else {
                    imgUrl = allImages.get(`images/items/${data.id.toLowerCase()}.png`) || "";
                }
            }

            slot.innerHTML = `<img src="${imgUrl}" onerror="this.style.opacity='0'">`;
            grid.appendChild(slot);
        });
    }

    function showSidebarTooltip(e, text) {
        const tt = document.getElementById('sidebar-tooltip');
        const rect = e.target.getBoundingClientRect();
        tt.innerText = text;
        tt.style.display = 'block';
        tt.style.left = (rect.right + 10) + 'px';
        tt.style.top = rect.top + 'px';
    }

    function hideSidebarTooltip() { document.getElementById('sidebar-tooltip').style.display = 'none'; }

    function pickRepo(mode) {
        if (mode === 'Speranza') loadDataRemote();
        else document.getElementById('folderInput').click();
    }

    function toggleImageMode() {
        imageMode = (imageMode === 'LOCAL') ? 'REMOTE' : 'LOCAL';
        document.getElementById('imgModeBtn').innerText = `IMG: ${imageMode}`;
        document.getElementById('imgModeBtn').classList.toggle('active', imageMode === 'REMOTE');
        renderSidebar(); render();
    }

    async function loadDataLocal(e) {
        const files = Array.from(e.target.files);
        imageMode = 'LOCAL';
        toggleImageMode(); // set to local
        dom.loader.style.display = 'flex';
        itemsDB = []; hideoutDB = []; allImages.clear();
        for (const f of files) {
            if (f.type.startsWith('image/')) {
                const path = f.webkitRelativePath.split('/').slice(1).join('/').toLowerCase();
                allImages.set(path, URL.createObjectURL(f));
            } else if (f.name.endsWith('.json')) {
                const content = JSON.parse(await f.text());
                if (f.webkitRelativePath.includes('hideout')) hideoutDB.push(content);
                else itemsDB.push(content);
            }
        }
        enableUI();
    }

    function enableUI() {
        document.body.classList.add('db-loaded');
        document.getElementById('searchInput').disabled = false;
        document.getElementById('loader').style.display = 'none';
        setSection('INVENTARIO');
    }

    const dom = { loader: document.getElementById('loader') };
</script>

</body>
</html>
<!-- VERSIONING: v1.5.0 | REPO: atarufox/Speranza-Archive | UPDATED: Jan 2025 -->